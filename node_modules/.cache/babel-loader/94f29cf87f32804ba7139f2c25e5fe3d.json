{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Borna\\\\Desktop\\\\TEST GIT\\\\casino-monkey-final\\\\src\\\\components\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport jsonData from \"../data/data.json\";\nimport { useState, useEffect } from \"react\";\nimport * as Yup from \"yup\";\nimport StepOne from \"./StepOne\";\nimport StepTwo from \"./StepTwo\";\nimport { useTranslation } from \"react-i18next\";\nimport title from \"../images/titletransparent.png\";\nimport Success from \"./Success\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const {\n    t,\n    i18n\n  } = useTranslation(); //initialize react-hook-form variables\n  //set initial state for step\n\n  const [step, setStep] = useState(1); //form state\n\n  const [formState, setFormState] = useState({});\n\n  const formStateHandler = (oldState, newState) => {\n    let mergedState = { ...oldState,\n      ...newState\n    };\n    setFormState(() => mergedState);\n  }; //\n\n\n  const formatDataForSending = data => {\n    let formattedData = initialValues.map(field => {\n      field.valueStr = data[field[\"code\"]];\n      return field;\n    });\n    return formattedData = [...formattedData];\n  };\n\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const submitRegistration = fields => {\n    return new Promise((resolve, reject) => {\n      setTimeout(() => {\n        schema.isValid(fields).then(check => {\n          if (check) {\n            resolve(fields);\n          } else {\n            reject({\n              message: \"Error\"\n            });\n          }\n        });\n      }, 1000);\n    });\n  };\n\n  useEffect(() => {\n    let formattedData = formatDataForSending(formState);\n\n    if (isSubmitting === true) {\n      submitRegistration(formattedData).then(res => {\n        nextStep(step);\n        setIsSubmitting(isSubmitting => !isSubmitting);\n      }).catch(err => console.log(err));\n    }\n  }, [isSubmitting]); //Yup schema for validation\n\n  let objSchema = Yup.object().shape({\n    code: Yup.string().required(),\n    valueStr: Yup.string().required(),\n    dataType: Yup.string().required()\n  });\n  let schema = Yup.array().of(objSchema); //separate json data into 2 steps\n\n  const stepOne = [];\n  const stepTwo = [];\n\n  const stepSeparator = () => {\n    for (let index = 0; index < jsonData.length; index++) {\n      if (index < 3) {\n        stepOne.push(jsonData[index]);\n      } else {\n        stepTwo.push(jsonData[index]);\n      }\n    }\n  };\n\n  stepSeparator(); //grab names and default values from json data\n\n  let initialValues = [];\n  jsonData.map(element => initialValues.push({\n    code: element[\"code\"],\n    valueStr: \"\",\n    dataType: \"string\"\n  })); //handlers for setting step state\n\n  const nextStep = () => {\n    setStep(step + 1);\n  };\n\n  const prevStep = () => {\n    setStep(step - 1);\n  };\n\n  const resetStep = () => {\n    setStep(1);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"app-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"title-img\",\n          alt: \"MONKEY CASINO written on a wooden board\",\n          src: title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"language-buttons\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => i18n.changeLanguage(\"en\"),\n            children: t(\"buttons.englishButton\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => i18n.changeLanguage(\"hr\"),\n            children: t(\"buttons.croatianButton\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"step-container\",\n        children: step === 1 ? /*#__PURE__*/_jsxDEV(StepOne, {\n          step: step,\n          nextStep: nextStep,\n          state: formState,\n          setState: formStateHandler,\n          data: stepOne\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 13\n        }, this) : step === 2 ? /*#__PURE__*/_jsxDEV(StepTwo, {\n          setIsSubmitting: setIsSubmitting,\n          step: step,\n          prevStep: prevStep,\n          state: formState,\n          setState: formStateHandler,\n          data: stepTwo\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(Success, {\n          step: step,\n          setStep: resetStep\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 103,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"UYEr2mZBD6WI6lRGq3Fje+44MOw=\", false, function () {\n  return [useTranslation];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["C:/Users/Borna/Desktop/TEST GIT/casino-monkey-final/src/components/App.js"],"names":["React","jsonData","useState","useEffect","Yup","StepOne","StepTwo","useTranslation","title","Success","App","t","i18n","step","setStep","formState","setFormState","formStateHandler","oldState","newState","mergedState","formatDataForSending","data","formattedData","initialValues","map","field","valueStr","isSubmitting","setIsSubmitting","submitRegistration","fields","Promise","resolve","reject","setTimeout","schema","isValid","then","check","message","res","nextStep","catch","err","console","log","objSchema","object","shape","code","string","required","dataType","array","of","stepOne","stepTwo","stepSeparator","index","length","push","element","prevStep","resetStep","changeLanguage"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport jsonData from \"../data/data.json\";\r\nimport { useState, useEffect } from \"react\";\r\nimport * as Yup from \"yup\";\r\nimport StepOne from \"./StepOne\";\r\nimport StepTwo from \"./StepTwo\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport title from \"../images/titletransparent.png\";\r\nimport Success from \"./Success\";\r\nfunction App() {\r\n  const { t, i18n } = useTranslation();\r\n  //initialize react-hook-form variables\r\n\r\n  //set initial state for step\r\n  const [step, setStep] = useState(1);\r\n  //form state\r\n  const [formState, setFormState] = useState({});\r\n  const formStateHandler = (oldState, newState) => {\r\n    let mergedState = { ...oldState, ...newState };\r\n    setFormState(() => mergedState);\r\n  };\r\n  //\r\n  const formatDataForSending = (data) => {\r\n    let formattedData = initialValues.map((field) => {\r\n      field.valueStr = data[field[\"code\"]];\r\n      return field;\r\n    });\r\n    return (formattedData = [...formattedData]);\r\n  };\r\n\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  const submitRegistration = (fields) => {\r\n    return new Promise((resolve, reject) => {\r\n      setTimeout(() => {\r\n        schema.isValid(fields).then((check) => {\r\n          if (check) {\r\n            resolve(fields);\r\n          } else {\r\n            reject({ message: \"Error\" });\r\n          }\r\n        });\r\n      }, 1000);\r\n    });\r\n  };\r\n  useEffect(() => {\r\n    let formattedData = formatDataForSending(formState);\r\n    if (isSubmitting === true) {\r\n      submitRegistration(formattedData)\r\n        .then((res) => {\r\n          nextStep(step);\r\n\r\n          setIsSubmitting((isSubmitting) => !isSubmitting);\r\n        })\r\n        .catch((err) => console.log(err));\r\n    }\r\n  }, [isSubmitting]);\r\n\r\n  //Yup schema for validation\r\n  let objSchema = Yup.object().shape({\r\n    code: Yup.string().required(),\r\n    valueStr: Yup.string().required(),\r\n    dataType: Yup.string().required(),\r\n  });\r\n  let schema = Yup.array().of(objSchema);\r\n\r\n  //separate json data into 2 steps\r\n  const stepOne = [];\r\n  const stepTwo = [];\r\n  const stepSeparator = () => {\r\n    for (let index = 0; index < jsonData.length; index++) {\r\n      if (index < 3) {\r\n        stepOne.push(jsonData[index]);\r\n      } else {\r\n        stepTwo.push(jsonData[index]);\r\n      }\r\n    }\r\n  };\r\n\r\n  stepSeparator();\r\n\r\n  //grab names and default values from json data\r\n  let initialValues = [];\r\n  jsonData.map((element) =>\r\n    initialValues.push({\r\n      code: element[\"code\"],\r\n      valueStr: \"\",\r\n      dataType: \"string\",\r\n    })\r\n  );\r\n\r\n  //handlers for setting step state\r\n  const nextStep = () => {\r\n    setStep(step + 1);\r\n  };\r\n  const prevStep = () => {\r\n    setStep(step - 1);\r\n  };\r\n  const resetStep = () => {\r\n    setStep(1);\r\n  };\r\n  return (\r\n    <div>\r\n      <div id=\"app-container\">\r\n        <header>\r\n          <img\r\n            className=\"title-img\"\r\n            alt=\"MONKEY CASINO written on a wooden board\"\r\n            src={title}\r\n          />\r\n          <div id=\"language-buttons\">\r\n            <button onClick={() => i18n.changeLanguage(\"en\")}>\r\n              {t(\"buttons.englishButton\")}\r\n            </button>\r\n            <button onClick={() => i18n.changeLanguage(\"hr\")}>\r\n              {t(\"buttons.croatianButton\")}\r\n            </button>\r\n          </div>\r\n        </header>\r\n        <div id=\"step-container\">\r\n          {step === 1 ? (\r\n            <StepOne\r\n              step={step}\r\n              nextStep={nextStep}\r\n              state={formState}\r\n              setState={formStateHandler}\r\n              data={stepOne}\r\n            />\r\n          ) : step === 2 ? (\r\n            <StepTwo\r\n              setIsSubmitting={setIsSubmitting}\r\n              step={step}\r\n              prevStep={prevStep}\r\n              state={formState}\r\n              setState={formStateHandler}\r\n              data={stepTwo}\r\n            />\r\n          ) : (\r\n            <Success step={step} setStep={resetStep}></Success>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}