{"ast":null,"code":"import defaultValidators from \"../data/default_validators.json\";\nimport * as Yup from \"yup\";\nimport i18next from \"i18next\";\nexport const flattenObject = obj => {\n  const flattened = {};\n  Object.keys(obj).forEach(key => {\n    if (typeof obj[key] === \"object\" && obj[key] !== null) {\n      Object.assign(flattened, flattenObject(obj[key]));\n    } else {\n      flattened[key] = obj[key];\n    }\n  });\n  return flattened;\n};\nconst default_validators = defaultValidators;\nexport const workedData = arrayData => {\n  let res = {};\n  res = arrayData.map(element => {\n    var _element$validators;\n\n    let value = element === null || element === void 0 ? void 0 : (_element$validators = element.validators) === null || _element$validators === void 0 ? void 0 : _element$validators.map(validator => ({\n      [validator.key]: Object.values(validator === null || validator === void 0 ? void 0 : validator.parameters)[0]\n    }));\n    value = { ...value\n    };\n    value = flattenObject(value);\n    return {\n      [element.code]: value\n    };\n  });\n  return res;\n};\nexport const generatePasswordValidator = element => {\n  var _element$name, _element$name2;\n\n  let name = Object.keys(element)[0];\n  let validator = {\n    passwordStrength: ((_element$name = element[name]) === null || _element$name === void 0 ? void 0 : _element$name.passwordStrength) || default_validators.password.passwordStrength,\n    passwordMustMatch: ((_element$name2 = element[name]) === null || _element$name2 === void 0 ? void 0 : _element$name2.passwordMustMatch) || default_validators.password.passwordMustMatch\n  };\n  let result = {\n    [Object.keys(element)[0]]: Yup.string().required(i18next.t(`errors.${name}.required`)).matches(validator.passwordStrength, i18next.t(`errors.password.passwordStrength`)).oneOf([Yup.ref(\"password\"), null], i18next.t(`errors.password.passwordMatch`))\n  };\n  return result;\n};\nexport const generateEmailValidator = element => {\n  var _element$name3;\n\n  let name = Object.keys(element)[0];\n  let validator = {\n    email: ((_element$name3 = element[name]) === null || _element$name3 === void 0 ? void 0 : _element$name3.emailValidator) || default_validators.emailValidator.email\n  };\n  let result = {\n    [Object.keys(element)[0]]: Yup.string().required(i18next.t(`errors.${name}.required`)).matches(validator.email, i18next.t(\"errors.email.email\"))\n  };\n  return result;\n};\nexport const generateStringValidator = element => {\n  var _element$name4, _element$name5, _element$name6;\n\n  let name = Object.keys(element)[0];\n  let validator = {\n    min: ((_element$name4 = element[name]) === null || _element$name4 === void 0 ? void 0 : _element$name4.minLength) || default_validators.string.length.min,\n    max: ((_element$name5 = element[name]) === null || _element$name5 === void 0 ? void 0 : _element$name5.maxLength) || default_validators.string.length.max,\n    lettersOnly: ((_element$name6 = element[name]) === null || _element$name6 === void 0 ? void 0 : _element$name6.lettersOnlyValidator) || default_validators.string.lettersOnly\n  };\n  let result = {\n    [Object.keys(element)[0]]: Yup.string().required(i18next.t(`errors.${name}.required`)).min(`${validator.min}`, i18next.t(`errors.${name}.minLength`)).max(`${validator.max}`, i18next.t(`errors.${name}.maxLength`)).matches(validator.lettersOnly, i18next.t(\"errors.fname.letters_only\"))\n  };\n  return result;\n};\nexport const checkValidatorType = element => {\n  if (Object.keys(element).filter(key => key.startsWith(\"email\")).length) {\n    return generateEmailValidator(element);\n  } else if (Object.keys(element).filter(key => key.startsWith(\"password\")).length) {\n    return generatePasswordValidator(element);\n  } else {\n    return generateStringValidator(element);\n  }\n};\nexport const generateYupSchema = data => {\n  let res = {};\n  let arr = data.map(element => {\n    return checkValidatorType(element);\n  });\n  arr.forEach(element => res = { ...res,\n    ...element\n  });\n  return res;\n};","map":{"version":3,"sources":["C:/Users/Borna/Desktop/TEST GIT/casino-monkey-final/src/components/ValidatorTest.js"],"names":["defaultValidators","Yup","i18next","flattenObject","obj","flattened","Object","keys","forEach","key","assign","default_validators","workedData","arrayData","res","map","element","value","validators","validator","values","parameters","code","generatePasswordValidator","name","passwordStrength","password","passwordMustMatch","result","string","required","t","matches","oneOf","ref","generateEmailValidator","email","emailValidator","generateStringValidator","min","minLength","length","max","maxLength","lettersOnly","lettersOnlyValidator","checkValidatorType","filter","startsWith","generateYupSchema","data","arr"],"mappings":"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","sourcesContent":["import defaultValidators from \"../data/default_validators.json\";\r\nimport * as Yup from \"yup\";\r\nimport i18next from \"i18next\";\r\n\r\nexport const flattenObject = (obj) => {\r\n  const flattened = {};\r\n  Object.keys(obj).forEach((key) => {\r\n    if (typeof obj[key] === \"object\" && obj[key] !== null) {\r\n      Object.assign(flattened, flattenObject(obj[key]));\r\n    } else {\r\n      flattened[key] = obj[key];\r\n    }\r\n  });\r\n\r\n  return flattened;\r\n};\r\nconst default_validators = defaultValidators;\r\n\r\nexport const workedData = (arrayData) => {\r\n  let res = {};\r\n  res = arrayData.map((element) => {\r\n    let value = element?.validators?.map((validator) => ({\r\n      [validator.key]: Object.values(validator?.parameters)[0],\r\n    }));\r\n    value = { ...value };\r\n    value = flattenObject(value);\r\n    return {\r\n      [element.code]: value,\r\n    };\r\n  });\r\n  return res;\r\n};\r\n\r\nexport const generatePasswordValidator = (element) => {\r\n  let name = Object.keys(element)[0];\r\n  let validator = {\r\n    passwordStrength:\r\n      element[name]?.passwordStrength ||\r\n      default_validators.password.passwordStrength,\r\n    passwordMustMatch:\r\n      element[name]?.passwordMustMatch ||\r\n      default_validators.password.passwordMustMatch,\r\n  };\r\n  let result = {\r\n    [Object.keys(element)[0]]: Yup.string()\r\n      .required(i18next.t(`errors.${name}.required`))\r\n      .matches(\r\n        validator.passwordStrength,\r\n        i18next.t(`errors.password.passwordStrength`)\r\n      )\r\n      .oneOf(\r\n        [Yup.ref(\"password\"), null],\r\n        i18next.t(`errors.password.passwordMatch`)\r\n      ),\r\n  };\r\n  return result;\r\n};\r\nexport const generateEmailValidator = (element) => {\r\n  let name = Object.keys(element)[0];\r\n  let validator = {\r\n    email:\r\n      element[name]?.emailValidator || default_validators.emailValidator.email,\r\n  };\r\n  let result = {\r\n    [Object.keys(element)[0]]: Yup.string()\r\n      .required(i18next.t(`errors.${name}.required`))\r\n      .matches(validator.email, i18next.t(\"errors.email.email\")),\r\n  };\r\n\r\n  return result;\r\n};\r\n\r\nexport const generateStringValidator = (element) => {\r\n  let name = Object.keys(element)[0];\r\n  let validator = {\r\n    min: element[name]?.minLength || default_validators.string.length.min,\r\n    max: element[name]?.maxLength || default_validators.string.length.max,\r\n    lettersOnly:\r\n      element[name]?.lettersOnlyValidator ||\r\n      default_validators.string.lettersOnly,\r\n  };\r\n  let result = {\r\n    [Object.keys(element)[0]]: Yup.string()\r\n      .required(i18next.t(`errors.${name}.required`))\r\n      .min(`${validator.min}`, i18next.t(`errors.${name}.minLength`))\r\n      .max(`${validator.max}`, i18next.t(`errors.${name}.maxLength`))\r\n      .matches(validator.lettersOnly, i18next.t(\"errors.fname.letters_only\")),\r\n  };\r\n  return result;\r\n};\r\n\r\nexport const checkValidatorType = (element) => {\r\n  if (Object.keys(element).filter((key) => key.startsWith(\"email\")).length) {\r\n    return generateEmailValidator(element);\r\n  } else if (\r\n    Object.keys(element).filter((key) => key.startsWith(\"password\")).length\r\n  ) {\r\n    return generatePasswordValidator(element);\r\n  } else {\r\n    return generateStringValidator(element);\r\n  }\r\n};\r\n\r\nexport const generateYupSchema = (data) => {\r\n  let res = {};\r\n  let arr = data.map((element) => {\r\n    return checkValidatorType(element);\r\n  });\r\n  arr.forEach((element) => (res = { ...res, ...element }));\r\n  return res;\r\n};\r\n"]},"metadata":{},"sourceType":"module"}